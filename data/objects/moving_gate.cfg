{
id: "moving_gate",
has_feet: true,
always_active: true,
adjust_feet_on_animation_change: false,
editor_info: {
	category: "cat",
	var: [
		{
			name: "speed",
			value: 2,
		},
        {
            name: "hold_frames",
            value: 500,
        },
        {
            name: "stay_retracted",
            value: false,
            type: "boolean",
        }
	],
},

vars: {
  is_retracting: false,
},

on_end_anim: "animation(animation)",

animation: [
	{
		id: "normal",
		image: "gate.png",
		rect: [0, 0, 15, 31],
		duration: 1000000,
		accel_y: 0,
		solid_area: [3,0,12,31],
	},
],
solid_area: [3,0,12,31],
on_release: "[set(is_retracting, false), set(accel_y, speed)]",
on_create: "set(accel_y, speed)",
on_button_pressed: "
[
  if(not is_retracting ,
    [
      set(velocity_y, -1 * speed),
      set(accel_y,-1),
      if(not stay_retracted, schedule(hold_frames, fire_event('release'))),
      set(is_retracting, true)
    ]
  ),
]",

}